let i=[],o=c=>{let s,t=[],e={lc:0,value:c,set(l){e.value=l,e.notify()},get(){return e.lc||e.listen(()=>{})(),e.value},notify(l){s=t;let r=!i.length;for(let n=0;n<s.length;n++)i.push(s[n],e.value,l);if(r){for(let n=0;n<i.length;n+=3)i[n](i[n+1],i[n+2]);i.length=0}},listen(l){return t===s&&(t=t.slice()),e.lc=t.push(l),()=>{t===s&&(t=t.slice());let r=t.indexOf(l);~r&&(t.splice(r,1),e.lc--)}},subscribe(l){let r=e.listen(l);return l(e.value),r},off(){}};return e};const u=o(0),f=()=>{u.set(u.get()+1)};export{u as c,f as i};
